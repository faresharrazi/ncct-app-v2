<div class="container mt-4">
  <div class="card shadow-sm" style="max-width: 600px; margin: 0 auto;">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center">
        <h1 class="h5 mb-0 me-3"><%= @transaction.title %></h1>
      </div>
      <small><%= @transaction.created_at.strftime('%B %d, %Y - %H:%M') %></small>
    </div>

    <div class="card-body">
      <!-- Description -->
      <p class="mb-3">
        <span class="text-muted"><%= @transaction.description.presence || "No description provided" %></span>
      </p>

      <!-- Amount, Category and Account Badges -->
      <div class="d-flex gap-2 mb-3">
        <span class="badge <%= @transaction.transaction_kind == 'expense' ? 'bg-danger' : 'bg-success' %> align-middle">
          <%= number_to_currency(@transaction.amount, unit: @transaction.main_account&.currency || @transaction.sub_account&.main_account&.currency || "â‚¬") %>
        </span>
        <% if @transaction.sub_account.present? %>
          <%= link_to @transaction.category&.title || "Uncategorized", 
                      main_account_sub_account_category_path(@transaction.sub_account.main_account, @transaction.sub_account, @transaction.category), 
                      class: "badge bg-info text-decoration-none align-middle" %>
          <%= link_to @transaction.sub_account.title, 
                      main_account_sub_account_path(@transaction.sub_account.main_account, @transaction.sub_account), 
                      class: "badge bg-secondary text-decoration-none align-middle" %>
        <% else %>
          <%= link_to @transaction.category&.title || @transaction.transaction_kind.capitalize, 
                      transactions_path, 
                      class: "badge bg-info text-decoration-none align-middle" %>
          <%= link_to @transaction.main_account.title, main_account_path(@transaction.main_account), 
                      class: "badge bg-secondary text-decoration-none align-middle" %>
        <% end %>
      </div>

      <!-- Creator -->
      <p class="mb-0">
        <i class="fas fa-user me-2"></i>
        <span class="text-muted"><%= @transaction.creator.first_name %> <%= @transaction.creator.last_name %></span>
      </p>
    </div>

    <div class="card-footer d-flex justify-content-between">
      <div>
        <%= link_to "Edit", edit_transaction_path(@transaction), class: "btn btn-primary btn-sm me-2" %>
        <%= link_to "Delete", transaction_path(@transaction), 
                    data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this Transaction?" },
                    class: "btn btn-danger btn-sm" %>
      </div>
      <%= link_to "Back", transactions_path, class: "btn btn-secondary btn-sm" %>
    </div>
  </div>
</div>
