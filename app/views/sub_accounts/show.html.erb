<div class="card shadow-sm" style="max-width: 600px; margin: 0 auto;">
  <div class="card-header bg-primary text-white">
    <h1 class="h5 mb-0"><%= @sub_account.title %></h1>
  </div>
  <div class="card-body">
    <!-- Description -->
    <p>
      <strong>Description:</strong>
      <span class="text-muted"><%= @sub_account.description.presence || "No description provided." %></span>
    </p>

    <!-- Percentage -->
    <p>
      <strong>Percentage:</strong>
      <span class="badge bg-primary"><%= @sub_account.percentage %>%</span>
    </p>

    <!-- Manage Categories -->
    <p>
      <%= link_to "Manage Categories", main_account_sub_account_categories_path(@main_account, @sub_account), 
                  class: "btn btn-link p-0 text-decoration-none" %>
    </p>

    <!-- Categories -->
    <p>
      <strong>Categories:</strong>
      <span>
        <% @sub_account.categories.each do |category| %>
          <%= link_to category.title, main_account_sub_account_category_path(@main_account, @sub_account, category), class: "badge bg-secondary text-decoration-none me-1" %>
        <% end %>
      </span>
    </p>
  </div>

  <!-- Footer -->
  <div class="card-footer d-flex justify-content-between align-items-center">
    <% if @main_account.owner == current_user %>
      <div>
        <%= link_to edit_main_account_sub_account_path(@main_account, @sub_account), 
                    class: "btn btn-link p-0 text-decoration-none me-3" do %>
          <i class="fas fa-edit me-1"></i> Edit
        <% end %>
        <%= link_to main_account_sub_account_path(@main_account, @sub_account),
                    data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this Account?" },
                    class: "btn btn-link text-danger p-0 text-decoration-none" do %>
          <i class="fas fa-trash-alt me-1"></i> Delete
        <% end %>
      </div>
    <% end %>
    <%= link_to main_account_sub_accounts_path(@main_account), 
                class: "btn btn-secondary btn-sm" do %>
      <i class="fas fa-arrow-left me-1"></i> Back to Accounts
    <% end %>
  </div>
</div>

<!-- Transactions -->
<div class="mt-4">
  <%= render partial: 'sub_account_transactions/transactions', locals: { transactions: @sub_account.sub_account_transactions, main_account: @main_account, title: "Transactions for '#{@sub_account.title}'", sub_account: @sub_account } %>
</div>